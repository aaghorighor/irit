@using Suftnet.Cos.Extension
@model List<Suftnet.Cos.DataAccess.TourDto>

<table id="tdTour" class="display" >
<thead>
<tr>  
    <th>Id#</th> 
    <th align="left">Sort Order</th>  
    <th align="left">Title</th>   
    <th align="left">Style Type</th>       
    <th>Active</th>    
    <th style="text-align:center ">Actions</th>  
</tr>
</thead>
<tbody>
   
@foreach (var _item in Model)
{       
    <tr id="@_item.Id"> 
    <td>@_item.Id</td>  
    <td align="left">@_item.SortOrder</td> 
    <td align="left">@_item.Title</td>    
    <td align="left">@_item.StyleType</td>           
    <td>@_item.Active</td>                  
        <td style="text-align:center ">           
            <a href="javascript:void(0)">
                <span id="EditLink" style="margin:10px;" editid="@_item.Id" title="Edit this row">
                    <img src="@Url.Asset("edit.png")" alt="" />
                </span>
            </a>
            <a href="javascript:void(0)">
                <span id="Delete" style="margin:10px;" deleteid="@_item.Id" title="Delete this row">
                    <img src="@Url.Asset("delete.png")" alt="" />
                </span>
            </a>
        </td>     
    </tr>   
}             
                    
</tbody>
</table>

<script type="text/javascript">

    $(function () {       

        $(document).on("click","#Delete", function (e)
        {
            e.preventDefault();

            js.confirm('@Url.Action("Delete", "Tour")', { Id: $(this).attr("deleteid") }, $(this).attr("deleteid"), "#tdTour").then(
            function (data) {

            });         
        });

        $(document).on("click", "#EditLink", function (e) {

            e.preventDefault();

           js.ajaxGet('@Url.Action("Get", "Tour")', { Id: $(this).attr("editid") }).then(
           function (data)
           {               
               var dataobject = data.dataobject;

               tinymce.get('Description').setContent(dataobject.Description);

               $("#Title").val(dataobject.Title);
               $('#Id').val(dataobject.Id);
               $("#SortOrder").val(dataobject.SortOrder);
               $("#StyleTypeId").val(dataobject.StyleTypeId);             
               $("#Active").attr("checked", dataobject.Active);

               if (dataobject.ImageUrl != null)
               {
                   $("#ImageUrl").val(dataobject.ImageUrl);
               }           

               $("#MainCollapsible").accordion({ collapsible: true });
               $("#MainCollapsible").accordion("activate", 0);

           });
            
        });        

        suftnet_Settings.TableInit('#tdTour', [0, 1, 4, 5]);
    });

 </script>



