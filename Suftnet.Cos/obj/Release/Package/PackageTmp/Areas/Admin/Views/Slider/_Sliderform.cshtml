@using Suftnet.Cos.Common;
@using Suftnet.Cos.Extension;

 <form action="@Url.Action("Create", "Slider")" method="post"  id="form">

    <div class="forms">

        <input id="Id" name="Id" type="hidden" value="0" />
        <input id="ImageUrl" name="ImageUrl" type="hidden" value="0" />     
       
        <div class="grid-12-12">
            <label class="forms-lbl">Title:</label>
            <input type="text" name="Title" id="Title" class="forms-txt validate[required] " maxlength="50" />
        </div>   
        
        <div class="grid-12-12">
            <label class="forms-lbl">Slider Type: </label>
            @Html.Dropdown("SliderTypeId", "validate[required]", (int)eSettings.SliderType)
        </div>       

        <div class="clear">
        </div>

        <div class="grid-12-12">
            <label class="forms-lbl">Upload File :</label>
            <input style="width:50%" type="file" name="file_upload[]" id="file_upload" />
        </div>             

        <div class="grid-12-12">
            <label class="forms-lbl">Short Description</label>
            <textarea name="Description" id="Description" onkeypress="return imposeMaxLength(event, this, 220);" class="validate[required]"></textarea>
        </div>

        <div class="grid-12-12">
            <input name="Publish" id="Publish" type="checkbox" /> <label class="form-lbl">Publish</label>
        </div>
        
        <div class="grid-12-12">
            <ul style="margin-left:0px; margin-top :0px" class="display01">
                <li class="display01"><span class="etip"><a class="uibutton normal " id="btnSubmit" title="Save Changes">Save Changes</a></span></li>              
            </ul>
        </div>       

    </div> 

</form>    

<div class="hide">
    <span id="buttonText" name="buttonText">Add File</span>
</div>

 <script type="text/javascript">

     $(function () {         
               
        $("#btnSubmit").bind("click", function (e) {

            e.preventDefault();
            e.stopImmediatePropagation();

            if (!suftnet_validation.isValid("form")) {
                return false;
            }

            if ($('#Publish').is(':checked')) {
                $("#Publish").val(true);
            } else {
                $("#Publish").val(false);
            }
           
            js.ajaxPost($("#form").attr("action"), $("#form").serialize()).then(
             function (data)
             {
                 switch (data.flag) {
                     case 1: //// add
                       
                         suftnet_grid.addSlider(data.objrow);
                         break;
                     case 2: //// update

                         suftnet_grid.updateSlider(data.objrow);
                         break;
                     default:;
                 }

                 $("#Id").val(0);

                 $("#Publish").attr("checked", false);
               
                 iuHelper.resetForm("#form");                 

             });           
        });                

        suftnet_upload.init('@Url.Action("Upload", "Slider")');

        suftnet_Settings.ClearErrorMessages("#form");
     });

 </script>
