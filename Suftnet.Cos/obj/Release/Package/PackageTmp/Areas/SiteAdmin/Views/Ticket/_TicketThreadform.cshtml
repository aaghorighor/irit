
@using Suftnet.Cos.Extension;

<form action="@Url.Action("Create", "TicketThread")" method="post"  id="ticketThreadform">

 <div class="forms" >      

   <input id="Id" name="Id" type="hidden" />  
   <input id="TicketId" name="TicketId" type="hidden" />        
  
   <div class="grid-12-12">
        <label class="forms-lbl">Comment</label>       
        <textarea name="Comment" id="Comment"  cols="" rows=""  onkeypress="return imposeMaxLength(event, this, 250);" ></textarea> 
   </div>    

   <div class="grid-12-12">                
          <label class="forms-lbl">Created Date: </label>    
          <input type="text" name="ThreadCreatedDT" id="ThreadCreatedDT" class="forms-txt-date validate[required]" value="@DateTime.Today.ToShortDateString()"  maxlength="50" />                          
   </div>

     <div class="grid-12-12">
         <ul style="margin-left:0px; margin-top :0px" class="display01">
             <li class="display01"><span class="etip"><a class="uibutton normal " id="btnSaveChanges" title="Save Changes">Save Changes</a></span></li>
             <li class="display01"><span class="etip"><a class="uibutton normal " id="btnback" title="Back">Back</a></span></li>
         </ul>
     </div>   
       
  </div>        
        
</form>

<script type="text/javascript" >

    $(function () {

        $("#ThreadCreatedDT").datepicker({
            showOn: "button",
            buttonImage: suftnet_Settings.icon + "calendar.png",
            buttonText: "Open datepicker",
            dateFormat: suftnet_Settings.dateTimeFormat,
            buttonImageOnly: true
        });

        $("#btnback").bind("click", function (event) {

            event.preventDefault();

            $("#TicketId").val(0);
            $("#ticketId").text('');
          
            $("#MainCollapsible").accordion("activate", 1);

        });

        $("#btnSaveChanges").bind("click", function (event) {

            event.preventDefault();

            if (!suftnet_validation.isValid("ticketThreadform")) {
                return false;
            }

            js.ajaxPost($("#ticketThreadform").attr("action"), $("#ticketThreadform").serialize()).then(
            function (data)
            {
                switch (data.flag) {
                    case 1: //// add                                          

                        suftnet_grid.addTicketThread(data.objrow);
                        break;
                    case 2: //// update 

                        suftnet_grid.updateTicketThread(data.objrow);
                        break;
                    default:;
                }

            });

            $("#ticketThreadform #Id").val(0);           
          
            iuHelper.resetForm("#ticketThreadform");

        });
     
    }); 

</script>
 




