@using Suftnet.Cos.Common;
@using Suftnet.Cos.Extension;

<form action="@Url.Action("Create", "LookUp")" method="post" id="form">
    <div class="forms">

        <input id="Id" name="Id" type="hidden" />
        <input id="ImageUrl" name="ImageUrl" type="hidden" />

        <div class="grid-12-12">
            <label class="forms-lbl">Title:</label>
            <input type="text" name="Title" id="Title" class="forms-txt validate[required]" maxlength="50" />
        </div>

        <div class="grid-12-12">
            <label class="forms-lbl">Class: </label>
            @Html.Dropdown("ClassId", "validate[required]", (int)eSettings.Class)
        </div>

        <div class="grid-12-12">
            <label class="forms-lbl">Description :</label>
            <textarea name="Description" id="Description" onkeypress="return imposeMaxLength(event, this, 520);"></textarea>
        </div>


        <div class="grid-12-12">
            <label class="forms-lbl">Upload File :</label>
            <input style="width:50%" type="file" name="file_upload[]" id="file_upload" />
        </div>

        <div style="margin:5px;"></div>

        <div class="grid-12-12">
            <input name="Active" id="Active" type="checkbox" /><label class="form-lbl"> Active</label>
        </div>

        <div class="grid-12-12">
            <ul style="margin-left:0px; margin-top :0px" class="display01">
                <li class="display01"><span class="etip"><a class="uibutton normal " id="btnSubmit" title="Save Changes">Save Changes</a></span></li>
            </ul>
        </div>

    </div>

</form>

<div class="hide">
    <span id="uploadUrl" name="uploadUrl" data-uploadUrl="@Url.Action("upload", "LookUp" )"></span>
    <span id="buttonText" name="buttonText">Add File</span>
</div>
@Styles.Render("~/bundle/uploadifive-css")

<script type="text/javascript">

    $(function () {

        $("#btnSubmit").bind("click", function (event) {
            event.preventDefault();

            if (!suftnet_validation.isValid("form")) {
                return false;
            }

            if ($('#Active').is(':checked')) {
                $("#Active").val(true);
            } else {
                $("#Active").val(false);
            }

            js.ajaxPost($("#form").attr("action"), $("#form").serialize()).then(
                function (data) {

                    switch (data.flag) {
                        case 1: //// add

                            suftnet_grid.addSettings(data.objrow);
                            break;
                        case 2: //// update

                            suftnet_grid.updateSettings(data.objrow);

                            break;
                        default: ;
                    }

                });

            $("#Active").attr('checked', false);
            $("#Id").val(0);
            iuHelper.resetForm("#form");

        });

        suftnet_upload.init($("#uploadUrl").attr("data-uploadUrl"));

    });

</script>

@Scripts.Render("~/bundle/uploadifive")
