@using Suftnet.Cos.Extension;
@model List<Suftnet.Cos.DataAccess.PlanDto>

<div class="tableName">

    <table id="tdPlan" class="display">
        <thead>
            <tr>
                <th align="left">Id#</th>              
                <th align="left">Basic</th>
                <th align="left">Premium</th>
                <th align="left">Premium Plus</th>                
                <th style="text-align:center">Actions</th>
            </tr>
        </thead>
        <tbody>

            @foreach (var _item in Model)
            {
                <tr id="@_item.Id">
                    <td align="left">@_item.Id</td>                   
                    <td align="left">@Url.Currency() @_item.BasicPrice</td> 
                    <td align="left">@Url.Currency() @_item.AdvancePrice</td> 
                    <td align="left">@Url.Currency() @_item.ProfessionalPrice</td>                    
                    <td style="text-align:center">
                        <a href="javascript:void(0)">
                            <span style="margin:10px;" id="PlanFeatureLink" planId="@_item.Id" title="Plan features">
                                <img src="@Url.Asset("stats_lines.png")" alt="Plan features" />
                            </span>
                        </a>        
                        <a href="javascript:void(0)">
                            <span style="margin:10px;" id="EditLink" editid="@_item.Id" title="Edit this row">
                                <img src="@Url.Asset("edit.png")" alt="Edit this row" />
                            </span>
                        </a>                
                        <span style="margin:10px;" id="Delete" deleteid="@_item.Id" title="Delete this row">
                            <a><img src="@Url.Asset("delete.png")" alt="Delete this row" /></a>
                        </span>
                    </td>
                </tr>
            }

        </tbody>
    </table>

</div>

<script type="text/javascript">

    $(function () {

        $("#PlanFeatureLink").live("click", function (event) {

            event.preventDefault();

            if ($(this).attr("planId") > 0) {
                
                $("#PlanId").val($(this).attr("planId"));

                js.ajaxGet('@Url.Action("GetAll", "Plan")', { Id: $(this).attr("planId") }).then(
                function (data) {
                   
                    suftnet_grid.refreshPlanFeature(data.dataobject.PlanFeature);
                });

                $("#MainCollapsible").accordion({ collapsible: false });
                $("#MainCollapsible").accordion("activate", 1);
            }
        });

        $("#EditLink").live("click", function (e)
        {
            e.preventDefault();

            js.ajaxGet('@Url.Action("Get", "Plan")', { Id: $(this).attr("EditId") }).then(
             function (data) {
                 var dataobject = data.dataobject;

                 $("#BasicPrice").val(dataobject.BasicPrice);
                 $("#AdvancePrice").val(dataobject.AdvancePrice);
                 $("#ProfessionalPrice").val(dataobject.ProfessionalPrice);               
                 $("#Id").val(dataobject.Id);              
               
             });
        });
       
        $("#Delete").live("click", function (e) {

            e.preventDefault();

            js.confirm('@Url.Action("Delete", "Plan")', { Id: $(this).attr("deleteid") }, $(this).attr("deleteid"), "#tdPlan").then(
              function (data) {

              });
        });                
       
        suftnet_Settings.TableInit('#tdPlan', [0, 2, 3,4]);

    });

</script>



