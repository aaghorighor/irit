
@using Suftnet.Cos.Common;
@using Suftnet.Cos.Extension;

<form action="@Url.Action("Create", "Tour")" method="post"  id="form">

 <div class="forms" >        
    <input id="Id" name="Id" type="hidden" />  
    <input id="ImageUrl" name="ImageUrl" type="hidden" />  
     
    <div class="grid-6-12">                
        <label class="forms-lbl">Title:</label>  
        <input type="text" name="Title" id="Title" class="forms-txt validate[required] " maxlength="500" />   
    </div>       

     <div class="clear">

     </div>

     <div class="grid-3-12">
         <label class="forms-lbl">Style Type: </label>
         @Html.Dropdown("StyleTypeId", "validate[required]", (int)eSettings.TourType)
     </div>  
     
     <div class="grid-3-12">
         <label class="forms-lbl">Sort Order: </label>
         <select name="SortOrder" id="SortOrder" class="validate[required]">
             @foreach (var _item in Enumerable.Range(1, 200))
             {
                 <option value="@_item">@_item</option>
             }
         </select>
     </div>       

     <div class="clear">

     </div> 

   <div class="grid-3-12">                
         <label class="forms-lbl">Upload File :</label>   
       <input type="file" name="file_upload[]" id="file_upload" />
    </div>      

    <div class="grid-12-12">
        <label class="form-lbl">Description :</label>
        <div style="margin:5px"></div>
        <div > <textarea name="Description" id="Description"  rows="60" cols="80" style="height:350px" maxlength="1000" class="validate[required]"></textarea></div><br />
    </div>
    
    <div class="grid-12-12">
       <input name="Active" id="Active"  type="checkbox" /> <label class="form-lbl">Active</label>       
    </div>    
  </div>

    <div class="grid-12-12">

        <ul style="margin-left:0px; margin-top :5px" class="uibutton-group">
            <li><span class="nwtip"><a class="uibutton icon add normal" id="btnSubmit" title="Save">Save Changes</a></span></li>
        </ul>

    </div> 

</form>  

<div class="hide">
    <span id="buttonText" name="buttonText">Add File</span>
</div> 

<script type="text/javascript">

    $(function () {
               
        $("#btnSubmit").bind("click", function (e) {

            e.preventDefault();

            if (!suftnet_validation.isValid("form")) {
                return false;
            }

            if ($('#Active').is(':checked')) {
                $("#Active").val(true);
            } else {
                $("#Active").val(false);
            }
          
            $("#Description").val(tinymce.activeEditor.getContent());

            js.ajaxPost($("#form").attr("action"), $("#form").serialize()).then(
              function (data)
              {
                  switch (data.flag) {
                      case 1: //// add                                          

                          suftnet_grid.addTour(data.objrow);
                          break;
                      case 2: //// update  

                          suftnet_grid.updateTour(data.objrow);

                          $("#MainCollapsible").accordion({ collapsible: true });
                          $("#MainCollapsible").accordion("activate", 1);

                          break;
                      default:;
                  }

              });

            $("#Active").attr('checked', false)

            $("#Id").val(0);         

            iuHelper.resetForm("#form");

        });

        suftnet_upload.init('@Url.Action("Upload", "Tour")');

        suftnet_Settings.ClearErrorMessages("#form");         

    });
       
</script>




