
<form action="@Url.Action("Create", "Category")" method="post" id="form">
 <div class="forms" >      

    <input id="Id" name="Id" type="hidden" value="0" />      
    <input type="hidden" id="ImageUrl" name="ImageUrl" />
        
    <div class="grid-12-12">                
        <label class="forms-lbl">Name:</label>  
        <input type="text" name="Name" id="Name" class="forms-txt validate[required]" maxlength="50" />   
    </div> 

     <div class="grid-12-12">
         <label class="form-lbl">Description :</label>
         <div style="margin:5px;"></div>
         <textarea id="Description" name="Description" rows="" cols="" onkeypress="return imposeMaxLength(event, this, 220);" class="form-txt"></textarea>
     </div>  

     <div class="grid-12-12">
         <label class="forms-lbl">Sort Order: </label>
         <select name="IndexNo" id="IndexNo" class="validate[required]">
             @foreach (var _item in Enumerable.Range(1, 200))
             {
                 <option value="@_item">@_item</option>
             }
         </select>
     </div> 

     <div class="avartar" style="margin-bottom:10px; margin-top:10px;">
         <input type="file" name="file_upload[]" id="file_upload" />
     </div>

     <div class="grid-12-12">
         <label class="form-lbl">Active</label> <input name="Status" id="Status" type="checkbox" value="true" /> 
      </div>

     <div class="grid-12-12">

         <ul class="display">
             <li class="display"><span class="etip"><a class="uibutton normal " id="btnSubmit" title="Save Changes">Save Changes</a></span></li>
         </ul>
     </div>

     </div> 
    
</form>

<div class="hide">
    <span id="buttonText" name="buttonText">Add Image</span>
    <span id="photoUrl" name="photoUrl" data-photoUrl="@Url.Content("~/Content/Photo/Blank.jpg")">Add Photo</span>
</div>

<script type="text/javascript" >

$(function () {
     
    $("#btnSubmit").bind("click", function (event)
    {
        event.preventDefault();
        event.stopImmediatePropagation();

        if (!suftnet_validation.isValid("form")) {
            return false;
        }

        if ($('#Status').is(':checked')) {
            $("#Status").val(true);
        } else {
            $("#Status").val(false);
        }           
      
        js.ajaxPost($("#form").attr("action"), $("#form").serialize()).then(
             function (data) {

                 switch (data.flag) {
                     case 1:                                        

                         suftnet_grid.addCategory(data.objrow);
                         break;
                     case 2: 

                         suftnet_grid.updateCategory(data.objrow);
                         break;
                     default:;
                 }
               
                 $("#Status").attr('checked', false);
                 $("#Id").val(0);

                 iuHelper.resetForm("#form");

             });

    });      

    suftnet_Settings.ClearErrorMessages("#form");
    suftnet_upload.init('@Url.Action("Upload", "Category")');    
}); 

</script>

