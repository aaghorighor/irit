@using Suftnet.Cos.Extension
@model IEnumerable<Suftnet.Cos.DataAccess.EditorDTO>

<table id="tdeditor" class="display" >
<thead>
<tr>  
    <th>Id#</th> 
    <th align="left">Created On</th>  
    <th align="left">Title</th>   
    <th align="left">Template Type</th>       
    <th>Active</th>    
    <th style="text-align:center ">Actions</th>  
</tr>
</thead>
<tbody>
   
@foreach (var _item in Model)
{       
    <tr id="@_item.Id"> 
    <td>@_item.Id</td>  
    <td align="left">@_item.CreatedOn</td> 
    <td align="left">@_item.Title</td>    
    <td align="left">@_item.ContentType</td>           
    <td>@_item.Active</td>                  
        <td style="text-align:center ">           
            <a href="javascript:void(0)">
                <span id="EditLink" style="margin:10px;" editid="@_item.Id" title="Edit this row">
                    <img src="@Url.Asset("edit.png")" alt="" />
                </span>
            </a>
            <a href="javascript:void(0)">
                <span id="Delete" style="margin:10px;" deleteid="@_item.Id" title="Delete this row">
                    <img src="@Url.Asset("delete.png")" alt="" />
                </span>
            </a>
        </td>     
    </tr>   
}             
                    
</tbody>
</table>

<script type="text/javascript">

    $(function () {       

        $(document).on("click", "#Delete", function (e)
        {
            e.preventDefault();

            js.confirm('@Url.Action("Delete", "Template")', { Id: $(this).attr("deleteid") }, $(this).attr("deleteid"), "#tdeditor").then(
            function (data) {

            });         
        });

        $(document).on("click","#EditLink", function (e) {

            e.preventDefault();

            js.ajaxGet('@Url.Action("Get", "Template")', { Id: $(this).attr("editid") }).then(
           function (data)
           {
               var tinymce_editor_id = 'Contents';
               var dataobject = data.dataobject;

                    console.log(dataobject);

               $("#Title").val(dataobject.Title);
                    $("#Id").val(dataobject.Id);

                  

               tinymce.get(tinymce_editor_id).setContent(dataobject.Contents);

               $("#ContentTypeid").val(dataobject.ContentTypeid);
               $("#CreatedDT").val(dataobject.CreatedOn);
               $("#Active").attr("checked", dataobject.Active);
               $("#ImageUrl").val(dataobject.ImageUrl);

               $("#MainCollapsible").accordion({ collapsible: true });
               $("#MainCollapsible").accordion("activate", 0);

           });
            
        });        

        suftnet_Settings.TableInit('#tdeditor', [0, 1,4,5]);
    });

 </script>



