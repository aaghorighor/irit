
@using Suftnet.Cos.Common;
@using Suftnet.Cos.Extension;

<form action="@Url.Action("Create", "Template")" method="post" enctype="multipart/form-data" id="form">
 <div class="forms" >        
    <input id="Id" name="Id" type="hidden" value="0" />  
    <input id="ImageUrl" name="ImageUrl" type="hidden" />  
     
    <div class="grid-6-12">                
        <label class="forms-lbl">Title:</label>  
        <input type="text" name="Title" id="Title" class="forms-txt validate[required] " maxlength="500" />   
    </div>       

     <div class="clear">

     </div>

     <div class="grid-3-12">
         <label class="forms-lbl">Template Type: </label>
         @Html.Dropdown("ContentTypeid", "validate[required]", (int)eSettings.Editor)
     </div>  
     
     <div class="clear">

     </div> 

   <div class="grid-12-12">                
         <label class="forms-lbl">Upload File :</label>   
       <input type="file" name="file_upload[]" id="file_upload" />
    </div>  

     <div class="clear">

     </div>
                         
    <div class="grid-3-12">  
        <label class="forms-lbl">Date:</label>
        <input type="text" name="CreatedDT" id="CreatedDT" class="forms-txt-date validate[required]" maxlength="50" />   
    </div>         
     
     <div class="clear">

     </div>    

    <div class="grid-12-12">
        <label class="form-lbl">Note :</label>
        <div style="margin:5px"></div>
        <div > <textarea name="Contents" id="Contents"  rows="60" cols="80" style="height:400px" maxlength="5000" class="validate[required]"></textarea></div><br />
    </div>
    
    <div class="grid-12-12">
       <input name="Active" id="Active"  type="checkbox" /> <label class="form-lbl">Active</label>       
    </div>    
  </div>

    <div class="grid-12-12">

        <ul style="margin-left:0px; margin-top :5px" class="uibutton-group">
            <li><span class="nwtip"><a class="uibutton icon add normal" id="btnSubmit" title="Save">Save Changes</a></span></li>
        </ul>

    </div> 

</form>   

<div class="hide">
    <span id="buttonText" name="buttonText">Add File</span>
</div>

<script type="text/javascript">

    $(function () {

        $("#CreatedDT").datepicker({
            showOn: "button",
            buttonImage: suftnet_Settings.icon + "calendar.png",
            buttonText: "Open datepicker",
            dateFormat: suftnet_Settings.dateTimeFormat,
            buttonImageOnly: true
        });

        $("#btnSubmit").bind("click", function (event) {

            event.preventDefault();

            if (!suftnet_validation.isValid("form")) {
                return false;
            }

            if ($('#Active').is(':checked')) {
                $("#Active").val(true);
            } else {
                $("#Active").val(false);
            }

            var note = tinymce.activeEditor.getContent();

            $("#Contents").val(note);

            js.ajaxPost($("#form").attr("action"), $("#form").serialize()).then(
              function (data)
              {
                  switch (data.flag) {
                      case 1: //// add                                          

                          suftnet_grid.addEditor(data.objrow);
                          break;
                      case 2: //// update  

                          suftnet_grid.updateEditor(data.objrow);

                          $("#MainCollapsible").accordion({ collapsible: true });
                          $("#MainCollapsible").accordion("activate", 1);

                          break;
                      default:;
                  }

              });

            $("#Active").attr('checked', false)

            $("#Id").val(0);         

            iuHelper.resetForm("#form");

        });

        suftnet_upload.init('@Url.Action("Upload", "Template")');   

        suftnet_Settings.ClearErrorMessages("#form");
    });
       
</script>




